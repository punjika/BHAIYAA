import{Ab as F,Bb as R,Cb as q,Da as b,Db as N,Eb as D,Fa as m,Fb as $,Ga as t,Ha as n,Hb as U,Ia as d,Ja as h,Ka as u,L as E,La as c,Ma as i,Na as s,Oa as S,Q as C,Sa as I,W as y,ca as v,da as f,lb as w,mb as M,nb as O,ra as r,sa as _,sb as P,ub as k,vb as g,wb as T,xb as V}from"./chunk-7TWV5RFI.js";var B=(()=>{class o{constructor(e){this.http=e,this.apiUrl="https://bhaiyaa-production.up.railway.app/api/events"}getEvents(){return this.http.get(this.apiUrl)}getEventById(e){return this.http.get(`${this.apiUrl}/${e}`)}createEvent(e){return this.http.post(this.apiUrl,e)}updateEvent(e,l){return this.http.put(`${this.apiUrl}/${e}`,l)}deleteEvent(e){return this.http.delete(`${this.apiUrl}/${e}`)}getRegistrationsByEvent(e){return this.http.get(`https://bhaiyaa-production.up.railway.app/api/registrations/event/${e}`)}static{this.\u0275fac=function(l){return new(l||o)(C(P))}}static{this.\u0275prov=E({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function G(o,p){if(o&1){let e=h();t(0,"tr")(1,"td"),i(2),n(),t(3,"td"),i(4),n(),t(5,"td"),i(6),n(),t(7,"td"),i(8),n(),t(9,"td"),i(10),n(),t(11,"td"),i(12),n(),t(13,"td"),i(14),n(),t(15,"td"),i(16),n(),t(17,"td",29)(18,"button",30),u("click",function(){let a=v(e).$implicit,x=c(2);return f(x.editEvent(a))}),d(19,"i",31),i(20," Edit "),n(),t(21,"button",32),u("click",function(){let a=v(e).$implicit,x=c(2);return f(x.deleteEvent(a.eventId))}),d(22,"i",33),i(23," Delete "),n(),t(24,"button",34),u("click",function(){let a=v(e).$implicit,x=c(2);return f(x.showRegistrations(a.eventId))}),i(25,"Registrations"),n()()()}if(o&2){let e=p.$implicit;r(2),s(e.eventId),r(2),s(e.name),r(2),s(e.description),r(2),s(e.date),r(2),s(e.time),r(2),s(e.category.description),r(2),s(e.venue.venueId),r(2),s(e.sponsor.sponsorId)}}function A(o,p){if(o&1&&(t(0,"div",27)(1,"h3"),i(2,"Event List"),n(),t(3,"table")(4,"thead")(5,"tr")(6,"th"),i(7,"Event ID"),n(),t(8,"th"),i(9,"Name"),n(),t(10,"th"),i(11,"Description"),n(),t(12,"th"),i(13,"Date"),n(),t(14,"th"),i(15,"Time"),n(),t(16,"th"),i(17,"Category"),n(),t(18,"th"),i(19,"Venue"),n(),t(20,"th"),i(21,"Sponsor"),n(),t(22,"th"),i(23,"Actions"),n()()(),t(24,"tbody"),b(25,G,26,8,"tr",28),n()()()),o&2){let e=c();r(25),m("ngForOf",e.events)}}function W(o,p){if(o&1&&(t(0,"tr")(1,"td"),i(2),n(),t(3,"td"),i(4),n(),t(5,"td"),i(6),n(),t(7,"td"),i(8),n(),t(9,"td"),i(10),n()()),o&2){let e=p.$implicit;r(2),s(e.name),r(2),s(e.email),r(2),s(e.phone),r(2),s(e.college),r(2),s(e.branch)}}function H(o,p){if(o&1){let e=h();t(0,"div",35)(1,"h3"),i(2,"Registered Users "),t(3,"button",36),u("click",function(){v(e);let a=c();return f(a.clearRegistrations())}),i(4,"Close"),n()(),t(5,"table",37)(6,"thead")(7,"tr")(8,"th"),i(9,"Name"),n(),t(10,"th"),i(11,"Email"),n(),t(12,"th"),i(13,"Phone"),n(),t(14,"th"),i(15,"College"),n(),t(16,"th"),i(17,"Branch"),n()()(),t(18,"tbody"),b(19,W,11,5,"tr",28),n()()()}if(o&2){let e=c();r(19),m("ngForOf",e.selectedRegistrations)}}function L(o,p){o&1&&(t(0,"div")(1,"div",38),i(2," No registrations found for this event. "),n()())}function J(o,p){if(o&1){let e=h();t(0,"button",39),u("click",function(){v(e);let a=c();return f(a.resetForm())}),d(1,"i",40),i(2," Cancel "),n()}}function K(o,p){if(o&1){let e=h();t(0,"div",41)(1,"div",42)(2,"div",43)(3,"div",44),i(4),n(),t(5,"button",45),u("click",function(){v(e);let a=c();return f(a.toastMessage="")}),n()()()()}if(o&2){let e=c();r(4),s(e.toastMessage)}}var te=(()=>{class o{constructor(e,l){this.eventService=e,this.fb=l,this.events=[],this.editingEventId=null,this.selectedEventId=null,this.selectedRegistrations=[],this.toastMessage="",this.showRegTable=!1,this.eventForm=this.fb.group({name:["",g.required],description:["",g.required],time:["",g.required],date:["",g.required],category:["",g.required],venue:["",g.required],sponsor:["",g.required]})}ngOnInit(){this.loadEvents()}loadEvents(){this.eventService.getEvents().subscribe(e=>this.events=e)}showToast(e){this.toastMessage=e,setTimeout(()=>this.toastMessage="",3e3)}onSubmit(){let e=this.eventForm.value,l={eventId:this.editingEventId??0,name:e.name,description:e.description,date:e.date,time:e.time,category:{categoryId:e.category,description:""},venue:{venueId:e.venue,location:""},sponsor:{sponsorId:e.sponsor,name:""}};this.editingEventId?this.eventService.updateEvent(this.editingEventId,l).subscribe(()=>{this.loadEvents(),this.resetForm(),this.showToast("Event updated successfully!")}):this.eventService.createEvent(l).subscribe(()=>{this.loadEvents(),this.resetForm(),this.showToast("Event created successfully!")})}editEvent(e){this.eventForm.setValue({name:e.name,description:e.description,time:e.time,date:e.date,category:e.category.categoryId,sponsor:e.sponsor.sponsorId,venue:e.venue.venueId}),this.editingEventId=e.eventId}deleteEvent(e){if(e==null){console.error("Event ID is invalid:",e);return}this.eventService.deleteEvent(e).subscribe(()=>{console.log("Event deleted:",e),this.loadEvents(),this.showToast("Event deleted successfully!")})}showRegistrations(e){this.eventService.getRegistrationsByEvent(e).subscribe(l=>{this.selectedRegistrations=l,this.showRegTable=!0})}clearRegistrations(){this.selectedEventId=null,this.selectedRegistrations=[],this.showRegTable=!1}resetForm(){this.eventForm.reset(),this.editingEventId=null}static{this.\u0275fac=function(l){return new(l||o)(_(B),_($))}}static{this.\u0275cmp=y({type:o,selectors:[["app-event"]],standalone:!0,features:[I],decls:38,vars:8,consts:[[1,"marquee-container"],[1,"marquee-text"],["class","table-container",4,"ngIf"],["class","form-box",4,"ngIf"],[4,"ngIf"],[1,"container"],[1,"form-container"],[3,"ngSubmit","formGroup"],["for","name"],["type","text","id","name","formControlName","name","required",""],["for","description"],["type","text","id","description","formControlName","description","required",""],["for","date"],["type","date","id","date","formControlName","date","required",""],["for","time"],["type","time","id","time","formControlName","time","required",""],["for","category"],["type","number","id","category","formControlName","category","placeholder","1.Technical, 2.Cultural, 3.Sports, 4.Workshops & others ","required",""],["for","venue"],["type","number","id","venue","formControlName","venue","placeholder","assign venueId","required",""],["for","sponsor"],["type","number","id","sponsor","formControlName","sponsor","placeholder","assign sponsorId","required",""],[1,"button-group"],["type","submit",1,"btn","btn-primary"],[1,"bi","bi-check-circle"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"],["class","toast-container position-fixed bottom-0 end-0 p-3","style","z-index: 11",4,"ngIf"],[1,"table-container"],[4,"ngFor","ngForOf"],[1,"actions"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"bi","bi-trash"],[3,"click"],[1,"form-box"],[1,"close",3,"click"],[1,"table2"],[1,"alert-box","fade-out"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-x-circle"],[1,"toast-container","position-fixed","bottom-0","end-0","p-3",2,"z-index","11"],["role","alert",1,"toast","show","text-white","bg-success"],[1,"d-flex"],[1,"toast-body"],["type","button","aria-label","Close",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"]],template:function(l,a){l&1&&(t(0,"div",0)(1,"div",1),i(2,"\u{1F44B} Welcome Admin! \u{1F389}"),n()(),b(3,A,26,1,"div",2)(4,H,20,1,"div",3)(5,L,3,0,"div",4),t(6,"div",5)(7,"div",6)(8,"h2"),i(9),n(),t(10,"form",7),u("ngSubmit",function(){return a.onSubmit()}),t(11,"label",8),i(12,"Event Name"),n(),d(13,"input",9),t(14,"label",10),i(15,"Description"),n(),d(16,"input",11),t(17,"label",12),i(18,"Date"),n(),d(19,"input",13),t(20,"label",14),i(21,"Time"),n(),d(22,"input",15),t(23,"label",16),i(24,"Category"),n(),d(25,"input",17),t(26,"label",18),i(27,"Venue"),n(),d(28,"input",19),t(29,"label",20),i(30,"Sponsor"),n(),d(31,"input",21),t(32,"div",22)(33,"button",23),d(34,"i",24),i(35),n(),b(36,J,3,0,"button",25),n()()(),b(37,K,6,1,"div",26),n()),l&2&&(r(3),m("ngIf",a.events.length>0),r(),m("ngIf",a.showRegTable&&a.selectedRegistrations.length>0),r(),m("ngIf",a.showRegTable&&a.selectedRegistrations.length===0),r(4),s(a.editingEventId?"Edit Event":"Add Event"),r(),m("formGroup",a.eventForm),r(25),S(" ",a.editingEventId?"Update":"Create"," "),r(),m("ngIf",a.editingEventId),r(),m("ngIf",a.toastMessage))},dependencies:[O,w,M,U,F,k,R,T,V,D,q,N],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;margin:20px auto;padding:20px;font-family:Segoe UI,sans-serif;border-radius:10px}.form-container[_ngcontent-%COMP%], .list-container[_ngcontent-%COMP%]{margin-bottom:40px;padding:10px;background-image:url(https://unbounce.com/photos/Gradient-Background.png);background-size:cover;border-radius:8px;box-shadow:0 2px 8px #0000001a}.marquee-container[_ngcontent-%COMP%]{width:100%;overflow:hidden;padding:5px 0}.marquee-text[_ngcontent-%COMP%]{display:inline-block;white-space:nowrap;font-size:24px;font-weight:700;animation:_ngcontent-%COMP%_scroll-right 10s linear infinite}@keyframes _ngcontent-%COMP%_scroll-right{0%{transform:translate(-100%)}to{transform:translate(100%)}}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{margin-top:0;color:#333;text-align:center;font-size:large}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}label[_ngcontent-%COMP%]{margin:10px 0 5px;font-weight:500}input[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;border-radius:5px}.button-group[_ngcontent-%COMP%]{margin-top:15px;display:flex;gap:10px}button[_ngcontent-%COMP%]{padding:10px 15px;border:none;background-color:#007bff;color:#fff;border-radius:5px;cursor:pointer}button[type=button][_ngcontent-%COMP%]{background-color:green}button[_ngcontent-%COMP%]:hover{opacity:.8}ul[_ngcontent-%COMP%]{list-style:none;padding:0}li[_ngcontent-%COMP%]{background-color:#fafafa;border:1px solid #ddd;margin-bottom:10px;padding:15px;border-radius:6px;display:flex;justify-content:space-between;align-items:center}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#28a745;margin-top:3px;display:flex;flex-wrap:wrap;flex-direction:row}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-last-child(2){background-color:#dc3545}.table-container[_ngcontent-%COMP%]{overflow-x:auto;max-width:auto;margin:5px auto;padding:5px;font-family:Segoe UI,sans-serif;background-image:url(https://unbounce.com/photos/Gradient-Background.png);background-size:cover;border-radius:5px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;text-align:left;vertical-align:top}th[_ngcontent-%COMP%]{background-color:#f0f0f0}td[_ngcontent-%COMP%]{background-color:#fff}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.85}.event-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:.5rem;padding:.4rem 1rem;background-color:#007bff;color:#fff;border:none;cursor:pointer}.event-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.fade-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut 3s forwards}.alert-box[_ngcontent-%COMP%]{padding:10px;color:red;border-radius:6px;margin:1rem 0;font-weight:700}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0;visibility:hidden}}table[_ngcontent-%COMP%]   .table2[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:1rem;border-radius:10px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:.5rem;text-align:left}.form-box[_ngcontent-%COMP%]{margin-left:100px;margin-right:100px;align-content:center}"]})}}return o})();export{te as EventComponent};
